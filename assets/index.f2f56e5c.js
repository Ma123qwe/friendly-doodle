import{_ as I,c as x,e as J}from"./index.27bb2621.js";import{E as R}from"./exportToExcel.5d174943.js";import{C as j}from"./correct.135c780d.js";import{d as q,r,b as L,c as M,e as C,M as G,o as c,f as b,g,i as s,j as v,B as H,l as V,q as D,F as z,k as A,p as K,m as Q,h as T,t as W}from"./vendor.ce825e00.js";const X=q({components:{Correct:j},setup(e){const u=r(!1),i=r([]),m=r([]),_=r([]),k=r([]),h=r([]),y=r(1),p=r(10),n=r(1),N=r(10),w=r(0),d=r([]),O=r(0),F=r(!1),a=L(),f=M(),P=r([{value:"\u5BFC\u51FA\u5F53\u524D\u9875\u9762",label:"\u5BFC\u51FA\u5F53\u524D\u9875\u9762"},{value:"\u5168\u90E8\u5BFC\u51FA",label:"\u5168\u90E8\u5BFC\u51FA"}]),B=r("");x({page:n.value,pageValue:p.value}).then(o=>{i.value=o.data.result});const $=o=>{console.log(o),F.value=o};return J().then(o=>{d.value=o.data.res,console.log(d.value,169),w.value=JSON.parse(d.value.length),console.log(w.value),d.value.map(t=>t.stage).reduce((t,S)=>(t.indexOf(S)==-1&&t.push(S),t),[]).forEach(t=>{k.value.push({value:t,label:t})}),d.value.map(t=>t.class).reduce((t,S)=>(t.indexOf(S)==-1&&t.push(S),t),[]).forEach(t=>{h.value.push({value:t,label:t})})}),{totle:i,options:k,options2:h,value1:m,value2:_,xuan:()=>{console.log(m.value,134);let o=[];o=d.value.filter(l=>l.stage==m.value).map(l=>(console.log(l.class),l.class)).reduce((l,E)=>(l.indexOf(E)==-1&&l.push(E),l),[]),console.log(o),h.value=[],o.forEach(l=>{console.log(l),h.value.push({value:l,label:l})})},search:()=>{u.value=!0,setTimeout(async()=>{let o=[];d.value.map(l=>{l.stage===m.value&&l.class===_.value&&(console.log(l),o.push(l),i.value=o)}),u.value=!1},1e3)},handleSizeChange:o=>{p.value=o,x({page:n.value,pageValue:p.value}).then(l=>{console.log(l.data.result),i.value=l.data.result})},handleCurrentChange:o=>{n.value=o,console.log(n.value),x({page:n.value,pageValue:p.value}).then(l=>{i.value=l.data.result,console.log(i.value)})},currentPage4:y,pageSize4:p,page:n,num:w,pageValue:N,searchArr:d,loading:u,chong:()=>{u.value=!0,setTimeout(async()=>{m.value=[],_.value=[],i.value=[],x({page:n.value,pageValue:p.value}).then(o=>{i.value=o.data.result}),u.value=!1},1e3)},exportExcel:()=>{const o=new R;B.value=="\u5168\u90E8\u5BFC\u51FA"?o.exportAsExcelFile(d.value," \u5168\u90E8\u6210\u7EE9\u8868"):B.value=="\u5BFC\u51FA\u5F53\u524D\u9875\u9762"&&o.exportAsExcelFile(i.value," \u5F53\u524D\u9875\u6210\u7EE9\u8868")},dao:P,daoExcel:()=>{console.log(B.value)},daoValue:B,index:O,look:o=>{u.value=!0,console.log(o),setTimeout(()=>{F.value=!0,u.value=!1,a.commit("AnswerSheet/getStudentPaper",o)},1e3)},flag:F,close:()=>{setTimeout(()=>{F.value=!1},1e3)},setcorrectFlag:$,fan:()=>{console.log(_.value,2121);let o=[];o=d.value.filter(l=>l.class==_.value).map(l=>(console.log(l.class),l.stage)).reduce((l,E)=>(l.indexOf(E)==-1&&l.push(E),l),[]),console.log(o),k.value=[],o.forEach(l=>{console.log(l),k.value.push({value:l,label:l})})},route:f}}}),U=e=>(K("data-v-1b50538a"),e=e(),Q(),e),Y=A(" \xA0\xA0 "),Z={class:"students"},ee=A(" \xA0\xA0\xA0\xA0"),le={class:"search"},ae=U(()=>g("span",null,"\u5B66\u79D1:",-1)),oe=U(()=>g("span",null,"\u73ED\u7EA7:",-1)),ue=A("\u67E5\u8BE2"),te=A("\u91CD\u7F6E"),se=A("\u5BFC\u51FA\u8868\u683C"),ne={key:0,class:"mc"},re={class:"bigBox"},de={class:"box"},ce={class:"table"},ie={key:0,class:"red"},pe={key:1,class:"red"},ve={key:2},ge=A("\u67E5\u770B"),he={class:"yema"},fe={class:"demo-pagination-block"};function Ce(e,u,i,m,_,k){const h=C("el-option"),y=C("el-select"),p=C("el-button"),n=C("el-table-column"),N=C("el-tag"),w=C("el-table"),d=C("el-pagination"),O=C("Correct"),F=G("loading");return c(),b(z,null,[Y,g("div",Z,[ee,g("div",le,[ae,s(y,{modelValue:e.value1,"onUpdate:modelValue":u[0]||(u[0]=a=>e.value1=a),placeholder:"\u8BF7\u9009\u62E9",onChange:e.xuan},{default:v(()=>[(c(!0),b(z,null,T(e.options,a=>(c(),D(h,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),oe,s(y,{modelValue:e.value2,"onUpdate:modelValue":u[1]||(u[1]=a=>e.value2=a),"multiplecollapse-tagsstyle":"margin-left: 20px",placeholder:"\u5E74\u7EA7",onChange:e.fan},{default:v(()=>[(c(!0),b(z,null,T(e.options2,a=>(c(),D(h,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),s(p,{type:"primary",class:"but cha",onClick:e.search,disabled:e.value1==""&&e.value2==""},{default:v(()=>[ue]),_:1},8,["onClick","disabled"]),s(p,{type:"primary",class:"but",onClick:e.chong},{default:v(()=>[te]),_:1},8,["onClick"]),s(y,{modelValue:e.daoValue,"onUpdate:modelValue":u[2]||(u[2]=a=>e.daoValue=a),placeholder:"\u5BFC\u51FA\u8868\u683C",class:"export",onChange:e.daoExcel},{default:v(()=>[(c(!0),b(z,null,T(e.dao,a=>(c(),D(h,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),s(p,{type:"primary",class:"dao",onClick:e.exportExcel},{default:v(()=>[se]),_:1},8,["onClick"]),e.loading==!0?H((c(),b("div",ne,null,512)),[[F,e.loading]]):V("",!0)]),g("div",re,[g("div",de,[g("div",ce,[s(w,{ref:"tableRef","row-key":"date",data:e.totle,style:{width:"100%"},border:!0,stripe:!0,"max-height":500,fit:!0,"highlight-current-row":!0,"default-sort":{prop:"minute"}},{default:v(()=>[s(n,{prop:"id",label:"id",width:"150"}),s(n,{prop:"student",label:"\u5B66\u751F\u540D\u79F0",width:"220"}),s(n,{prop:"stage",label:"\u4E13\u4E1A",width:"150"}),s(n,{prop:"class",label:"\u73ED\u7EA7",width:"150"}),s(n,{prop:"view",label:"\u5F55\u5C4F",width:"350"}),s(n,{prop:"submitDay",label:"\u63D0\u4EA4\u65F6\u95F4",width:"260"}),s(n,{prop:"list",label:"\u5206\u6570",width:"100",sortable:"","filter-method":e.filterTag,"filter-placement":"bottom-end"},{default:v(a=>[a.row.text==2?(c(),b("p",ie,"\u5F55\u5C4F\u4F5C\u5F0A")):V("",!0),JSON.parse(a.row.list).length<=0&&a.row.text=="1"?(c(),b("p",pe,"\u4F5C\u5F0A")):V("",!0),JSON.parse(a.row.list).length>0&&a.row.text=="1"?(c(),b("p",ve,W(JSON.parse(a.row.list).filter(f=>f.hasOwnProperty("score")).map(f=>f.score).reduce((f,P)=>f+=Number(P),0)),1)):V("",!0)]),_:1},8,["filter-method"]),s(n,{prop:"text",label:"\u64CD\u4F5C",width:"210"},{default:v(a=>[s(N,{"disable-transitions":"",onClick:f=>e.look(a.row)},{default:v(()=>[ge]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),g("div",he,[g("div",fe,[s(d,{currentPage:e.currentPage4,"onUpdate:currentPage":u[3]||(u[3]=a=>e.currentPage4=a),"page-size":e.pageSize4,"onUpdate:page-size":u[4]||(u[4]=a=>e.pageSize4=a),"page-sizes":[5,10,15],small:e.small,height:100,disabled:e.disabled,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:e.num,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["currentPage","page-size","small","disabled","total","onSizeChange","onCurrentChange"])])])])]),e.flag?(c(),D(O,{key:0,setcorrectFlag:e.setcorrectFlag},null,8,["setcorrectFlag"])):V("",!0)])],64)}var ze=I(X,[["render",Ce],["__scopeId","data-v-1b50538a"]]);export{ze as default};
