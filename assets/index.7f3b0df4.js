import{E as $e}from"./exportToExcel.5d174943.js";import{_ as te,u as Ce,t as we,b as ve,s as ye,d as be}from"./index.27bb2621.js";import{d as se,E as J,e as _,o as a,f,g as o,t as M,l as T,F as I,h as P,i as u,j as m,p as ne,m as ue,k,r as d,N as re,b as ie,D as de,q as F,B as me,C as ke,M as Be,V as Ee}from"./vendor.ce825e00.js";const Ve=se({components:{},props:{prompt:Object},setup(e,t){const B=J(()=>e.prompt);return console.log(B.value,123),{prompt:B,close:()=>{t.emit("close",!1)}}}}),X=e=>(ne("data-v-29f72da5"),e=e(),ue(),e),Ae={class:"Prompt"},Ue={class:"box"},Fe=X(()=>o("h3",null,"\u9884\u89C8",-1)),Se={class:"content"},Oe={class:"rows context"},De=X(()=>o("h5",null,"\u4E13\u4E1A\u9636\u6BB5 : ",-1)),Le={class:"rows context"},je=X(()=>o("h5",null,"\u9898\u5E72 : ",-1)),Te={style:{display:"flex","align-items":"center"}},Ie=["src"],Pe={key:0,class:"rows options"},ze=X(()=>o("h5",null,"\u9009\u9879 :",-1)),Ne={key:0},qe={style:{"font-weight":"bolder"}},Me={key:1},Re={style:{"font-weight":"bolder"}},Je={class:"rows context"},Qe=X(()=>o("h5",null,"\u6807\u51C6\u7B54\u6848 : ",-1)),Ge={key:0,style:{width:"100%"}},He={key:1},Ke={class:"rows context"},We=X(()=>o("h5",null,"\u5206\u503C : ",-1)),Xe={class:"rows context"},Ye=X(()=>o("h5",null,"\u96BE\u5EA6 : ",-1)),Ze=["data-length-n"],xe={class:"rows context"},eo=X(()=>o("h5",null,"\u77E5\u8BC6\u70B9 : ",-1)),oo={class:"btn"},lo=k("\u53D6\u6D88");function to(e,t,B,S,l,y){const C=_("el-button");return a(),f("div",Ae,[o("div",Ue,[Fe,o("div",Se,[o("div",Oe,[De,o("p",null,M(e.prompt.stage),1)]),o("div",Le,[je,o("p",Te,[o("span",null,M(e.prompt.title),1),e.prompt.img?(a(),f("img",{key:0,src:e.prompt.img,alt:"",style:{width:"130px",height:"100px"}},null,8,Ie)):T("",!0)])]),e.prompt.options?(a(),f("div",Pe,[ze,Array.isArray(e.prompt.options)?(a(),f("ul",Ne,[(a(!0),f(I,null,P(e.prompt.options,(v,h)=>(a(),f("li",{key:h},[o("span",qe,M(v.option)+" .\xA0\xA0",1),o("span",null,M(v.title),1)]))),128))])):(a(),f("ul",Me,[(a(!0),f(I,null,P(JSON.parse(e.prompt.options),(v,h)=>(a(),f("li",{key:h},[o("span",Re,M(v.option)+" .\xA0\xA0",1),o("span",null,M(v.title),1)]))),128))]))])):T("",!0),o("div",Je,[Qe,!Array.isArray(e.prompt.answer)&&e.prompt.answer?(a(),f("p",Ge,M(e.prompt.answer),1)):T("",!0),Array.isArray(e.prompt.answer)?(a(),f("p",He,[(a(!0),f(I,null,P(e.prompt.answer,(v,h)=>(a(),f("span",{key:h},"\xA0"+M(v),1))),128))])):T("",!0)]),o("div",Ke,[We,o("p",null,M(e.prompt.value)+"\u5206",1)]),o("div",Xe,[Ye,o("p",null,[(a(!0),f(I,null,P(e.prompt.difficulty,v=>(a(),f("span",{key:v,"data-length-n":e.prompt.difficulty.length,class:"iconfont",style:{color:"rgb(226, 226, 7)"}},"\uE637",8,Ze))),128))])]),o("div",xe,[eo,o("p",null,M(e.prompt.point),1)])]),o("div",oo,[u(C,{style:{"margin-right":"25px"},type:"primary",onClick:e.close},{default:m(()=>[lo]),_:1},8,["onClick"])])])])}var ce=te(Ve,[["render",to],["__scopeId","data-v-29f72da5"]]);const so=se({components:{},setup(e,t){const B=d(""),S=()=>{const h=document.querySelector("#btnFile");h.click(),h.addEventListener("change",c=>{let p=c.target.files[0];const E=new FileReader;E.readAsDataURL(p),E.onload=function(V){B.value=V.target.result}})};let l=1024*1024*2;const y=h=>{we({name:h}).then(c=>{const{url:p}=c.data;p&&(console.log(p),re({message:"\u4E0A\u4F20\u56FE\u7247\u6210\u529F!",type:"success"}),t.emit("closeUpload",p))})},C=()=>{t.emit("confirm",!1)},v=h=>{const p=document.querySelector("#btnFile").files[0],[E,V]=p.name.split("."),O=h*l;if(O>p.size){y(p.name);return}const b=p.slice(O,O+l),g=`${E}.${h}.${V}`,$=new File([b],g),s=new FormData;s.append("file",$),Ce(s).then(n=>{console.log(n),v(++h)})};return{addImg:S,showImg:B,upload:v,confirm:C,prompt}}}),ge=e=>(ne("data-v-60103eb8"),e=e(),ue(),e),no={class:"upload_img"},uo={class:"content"},ao=ge(()=>o("h3",null,"\u4E0A\u4F20\u56FE\u7247",-1)),io={class:"img_area"},co={class:"area"},po=["src"],ro={key:1},vo=ge(()=>o("input",{type:"file",id:"btnFile"},null,-1)),_o={class:"btn"};function ho(e,t,B,S,l,y){return a(),f("div",no,[o("div",uo,[ao,o("div",io,[o("div",co,[o("div",{class:"Add_img",onClick:t[1]||(t[1]=(...C)=>e.addImg&&e.addImg(...C))},[e.showImg?(a(),f("img",{key:0,src:e.showImg,alt:"",onClick:t[0]||(t[0]=(...C)=>e.addImg&&e.addImg(...C))},null,8,po)):(a(),f("span",ro)),vo])])]),o("div",_o,[o("button",{onClick:t[2]||(t[2]=(...C)=>e.confirm&&e.confirm(...C))},"\u53D6\u6D88"),o("button",{onClick:t[3]||(t[3]=C=>e.upload(0))},"\u4E0A\u4F20")])])])}var _e=te(so,[["render",ho],["__scopeId","data-v-60103eb8"]]);const mo=se({components:{Prompt:ce,Upload:_e},props:{showObj:Object},setup(e,t){const B=ie();de(()=>{B.dispatch("OptionsBank/getStage")});const S=J(()=>B.state.OptionsBank.stageList),l=J(()=>e.showObj),y=d(l.value&&l.value.stage?l.value.stage:""),C=i=>{y.value=i},v=d(l.value&&l.value.title?l.value.title:""),h=i=>{v.value=i},c=d(""),p=d(!1),E=()=>{p.value=!0,console.log(p.value)},V=i=>{p.value=!1,c.value=i},O=i=>{p.value=i},b=l.value&&l.value.options?JSON.parse(l.value.options):null,g=d("abcdefghijklmnopqrstuvwxyz"),$=d(b||[{option:"A",title:""},{option:"B",title:""},{option:"C",title:""},{option:"D",title:""}]),s=i=>{const{option:ae,title:r}=i;$.value.forEach(A=>{A.option===ae&&(A.title=r)})},n=()=>{$.value.push({option:`${g.value[$.value.length+1].toUpperCase()}`,title:""})};let U=l.value&&l.value.answer?g.value.split("").findIndex(i=>i.indexOf(l.value.answer.toLowerCase())!==-1):null;const j=d(U||null),N=d(l.value&&l.value.answer?l.value.answer:""),Q=i=>{j.value=i,N.value=$.value[i].option},D=d(l.value&&l.value.value?l.value.value:5),G=i=>{j.value=i},L=d(l.value&&l.value.difficulty?l.value.difficulty:null),H=i=>{L.value=i},z=d(l.value&&l.value.point?l.value.point:""),le=i=>{z.value=i},w=async()=>{let i={id:l.value&&l.value.id?l.value.id:null,stage:y.value,title:v.value,img:c.value,options:$.value,student_answer:"",answer:N.value,value:D.value,type:0,difficulty:L.value,point:z.value,time:new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString()};await ve(i).then(()=>{t.emit("submit",!1),q()})},q=()=>{y.value="",v.value="",c.value="",$.value=[{option:"A",title:""},{option:"B",title:""}],j.value=null,N.value="",D.value=5,L.value=null,z.value="",l.value=null},K=i=>{$.value.splice(i,1)},x=d({}),R=d(!1);return{stageList:S,stage:y,changeStage:C,title:v,options:$,answer:j,num:D,difficulty:L,setTitle:h,setOption:s,addOptions:n,setAnswer:Q,setValue:G,setDifficulty:H,point:z,setPoint:le,submit:w,resetValue:q,deleteOption:K,prompt:x,isShow:R,Look:()=>{let i={stage:y.value,title:v.value,options:$.value,student_answer:"",answer:N.value,value:D.value,type:0,difficulty:L.value,point:z.value};x.value=i,R.value=!0},close:i=>{R.value=i},showObj:l,back:()=>{t.emit("submit",!1)},uploadLoad:E,isUpload:p,closeUpload:V,confirm:O,imgUrl:c}}}),Y=e=>(ne("data-v-75e01a0c"),e=e(),ue(),e),go={class:"radio"},fo={class:"main"},$o={class:"Option"},Co={class:"rows"},wo=Y(()=>o("h5",null,"\u4E13\u4E1A\u9636\u6BB5:",-1)),yo={class:"select"},bo={class:"rows"},ko=Y(()=>o("h5",null,"\u9898\u5E72:",-1)),Bo={class:"select"},Eo={class:"upload"},Vo={class:"rows"},Ao=Y(()=>o("h5",null,"\u9009\u9879:",-1)),Uo={class:"select options"},Fo=k("\u5220\u9664"),So={class:"rows"},Oo=Y(()=>o("h5",null,"\u6807\u7B54:",-1)),Do={class:"select"},Lo={class:"rows"},jo=Y(()=>o("h5",null,"\u5206\u503C:",-1)),To={class:"select"},Io={class:"rows"},Po=Y(()=>o("h5",null,"\u96BE\u5EA6:",-1)),zo={class:"select"},No={class:"rows"},qo=Y(()=>o("h5",null,"\u77E5\u8BC6\u70B9:",-1)),Mo={class:"select"},Ro={class:"rows"},Jo=Y(()=>o("h5",null,null,-1)),Qo={class:"select"},Go=k("\u63D0\u4EA4"),Ho=k("\u91CD\u7F6E"),Ko=k("\u6DFB\u52A0\u9009\u9879"),Wo=k("\u9884\u89C8"),Xo=k("\u5173\u95ED");function Yo(e,t,B,S,l,y){const C=_("el-option"),v=_("el-select"),h=_("el-input"),c=_("el-button"),p=_("el-radio"),E=_("el-radio-group"),V=_("el-input-number"),O=_("el-rate"),b=_("el-row"),g=_("Prompt"),$=_("Upload");return a(),f("div",go,[o("div",fo,[o("div",$o,[o("div",Co,[wo,o("div",yo,[u(v,{modelValue:e.stage,"onUpdate:modelValue":t[0]||(t[0]=s=>e.stage=s),class:"m-2",placeholder:"\u4E13\u4E1A\u9636\u6BB5",onChange:e.changeStage},{default:m(()=>[(a(!0),f(I,null,P(e.stageList,s=>(a(),F(C,{key:s.id,label:s.title,value:s.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",bo,[ko,o("div",Bo,[u(h,{modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=s=>e.title=s),placeholder:"\u8BF7\u8F93\u5165\u9898\u5E72",clearable:"",style:{width:"60%"},onChange:e.setTitle},null,8,["modelValue","onChange"]),o("div",Eo,[o("span",{class:"iconfont",style:{cursor:"pointer"},onClick:t[2]||(t[2]=(...s)=>e.uploadLoad&&e.uploadLoad(...s))},"\uE712")])])]),o("div",Vo,[Ao,o("div",Uo,[o("ul",null,[(a(!0),f(I,null,P(e.options,(s,n)=>(a(),f("li",{key:n},[o("span",null,M(s.option)+" : ",1),u(h,{modelValue:s.title,"onUpdate:modelValue":U=>s.title=U,placeholder:"\u8BF7\u8F93\u5165\u9009\u9879\u5185\u5BB9",clearable:"",style:{width:"60%"},onChange:U=>e.setOption(s)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e.options.length-1===n?(a(),F(c,{key:0,class:"remove",style:{"margin-left":"10px"},onClick:U=>e.deleteOption(n)},{default:m(()=>[Fo]),_:2},1032,["onClick"])):T("",!0)]))),128))])])]),o("div",So,[Oo,o("div",Do,[u(E,{modelValue:e.answer,"onUpdate:modelValue":t[3]||(t[3]=s=>e.answer=s),onChange:e.setAnswer},{default:m(()=>[(a(!0),f(I,null,P(e.options,(s,n)=>(a(),F(p,{label:n,key:n},{default:m(()=>[k(M(s.option),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",Lo,[jo,o("div",To,[u(V,{min:"0",modelValue:e.num,"onUpdate:modelValue":t[4]||(t[4]=s=>e.num=s),step:1,onChange:e.setValue},null,8,["modelValue","onChange"])])]),o("div",Io,[Po,o("div",zo,[u(O,{modelValue:e.difficulty,"onUpdate:modelValue":t[5]||(t[5]=s=>e.difficulty=s),onChange:e.setDifficulty},null,8,["modelValue","onChange"])])]),o("div",No,[qo,o("div",Mo,[u(h,{modelValue:e.point,"onUpdate:modelValue":t[6]||(t[6]=s=>e.point=s),placeholder:"\u77E5\u8BC6\u70B9",clearable:"",style:{width:"60%"},onChange:e.setPoint},null,8,["modelValue","onChange"])])]),o("div",Ro,[Jo,o("div",Qo,[u(b,{class:"mb-4"},{default:m(()=>[u(c,{class:"submit",onClick:e.submit},{default:m(()=>[Go]),_:1},8,["onClick"]),u(c,{class:"reset",onClick:e.resetValue},{default:m(()=>[Ho]),_:1},8,["onClick"]),u(c,{class:"add",onClick:e.addOptions},{default:m(()=>[Ko]),_:1},8,["onClick"]),u(c,{onClick:e.Look,class:"showLook"},{default:m(()=>[Wo]),_:1},8,["onClick"]),u(c,{class:"close",onClick:e.back},{default:m(()=>[Xo]),_:1},8,["onClick"])]),_:1})])])])]),e.isShow?(a(),F(g,{key:0,prompt:e.prompt,onClose:e.close},null,8,["prompt","onClose"])):T("",!0),e.isUpload?(a(),F($,{key:1,onCloseUpload:e.closeUpload,onConfirm:e.confirm,imgUrl:e.imgUrl,prompt:e.prompt},null,8,["onCloseUpload","onConfirm","imgUrl","prompt"])):T("",!0)])}var Zo=te(mo,[["render",Yo],["__scopeId","data-v-75e01a0c"]]);const xo=se({components:{Prompt:ce,Upload:_e},props:{showObj:Object},setup(e,t){const B=ie();de(()=>{B.dispatch("OptionsBank/getStage")});const S=J(()=>B.state.OptionsBank.stageList),l=J(()=>e.showObj),y=d(l.value&&l.value.stage?l.value.stage:""),C=i=>{y.value=i},v=d(l.value&&l.value.title?l.value.title:""),h=i=>{v.value=i},c=d(""),p=d(!1),E=()=>{p.value=!0,console.log(p.value)},V=i=>{p.value=!1,c.value=i},O=i=>{p.value=i};let b=l.value&&l.value.options?l.value.options:null;const g=d(" abcdefghijklmnopqrstuvwxyz"),$=d(b?JSON.parse(b):[{option:"A",title:""},{option:"B",title:""},{option:"C",title:""},{option:"D",title:""}]),s=i=>{const{option:ae,title:r}=i;$.value.forEach(A=>{A.option===ae&&(A.title=r)})},n=()=>{$.value.push({option:`${g.value[$.value.length+1].toUpperCase()}`,title:""})},U=l.value&&l.value.answer?l.value.answer:null;let j=d(U?U.split(","):[]),N=U?U.split(","):[];console.log(N);const Q=i=>{j.value=i,N=i},D=d(l.value&&l.value.value?l.value.value:5),G=i=>{D.value=i},L=d(l.value&&l.value.difficulty?l.value.difficulty:null),H=i=>{L.value=i},z=d(l.value&&l.value.point?l.value.point:""),le=i=>{z.value=i},w=async()=>{let i={id:l.value&&l.value.id?l.value.id:null,stage:y.value,title:v.value,img:c.value,options:$.value,student_answer:"",answer:N,value:D.value,type:1,difficulty:L.value,point:z.value,time:new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString()};await ve(i).then(ae=>{t.emit("submit",!1),q()})},q=()=>{y.value="",v.value="",c.value="",$.value=[{option:"A",title:""},{option:"B",title:""}],j.value=[],D.value=5,L.value=null,z.value="",l.value=null},K=i=>{$.value.splice(i,1)},x=d({}),R=d(!1);return{stageList:S,stage:y,changeStage:C,title:v,options:$,answer:j,num:D,difficulty:L,setTitle:h,setOption:s,addOptions:n,setAnswer:Q,setValue:G,setDifficulty:H,point:z,setPoint:le,submit:w,resetValue:q,deleteOption:K,prompt:x,isShow:R,Look:()=>{let i={stage:y.value,title:v.value,options:$.value,student_answer:"",answer:N,value:D.value,type:1,difficulty:L.value,point:z.value};x.value=i,R.value=!0},close:i=>{R.value=i},back:()=>{t.emit("submit",!1)},uploadLoad:E,isUpload:p,closeUpload:V,confirm:O,imgUrl:c}}}),Z=e=>(ne("data-v-12609944"),e=e(),ue(),e),el={class:"checkbox"},ol={class:"main"},ll={class:"Option"},tl={class:"rows"},sl=Z(()=>o("h5",null,"\u4E13\u4E1A\u9636\u6BB5:",-1)),nl={class:"select"},ul={class:"rows"},al=Z(()=>o("h5",null,"\u9898\u5E72:",-1)),il={class:"select"},dl={class:"upload"},cl={class:"rows"},pl=Z(()=>o("h5",null,"\u9009\u9879:",-1)),rl={class:"select options"},vl=k("\u5220\u9664"),_l={class:"rows"},hl=Z(()=>o("h5",null,"\u6807\u7B54:",-1)),ml={class:"select"},gl={class:"rows"},fl=Z(()=>o("h5",null,"\u5206\u503C:",-1)),$l={class:"select"},Cl={class:"rows"},wl=Z(()=>o("h5",null,"\u96BE\u5EA6:",-1)),yl={class:"select radio"},bl={class:"rows"},kl=Z(()=>o("h5",null,"\u77E5\u8BC6\u70B9:",-1)),Bl={class:"select radio"},El={class:"rows button"},Vl=Z(()=>o("h5",null,null,-1)),Al={class:"select"},Ul=k("\u63D0\u4EA4"),Fl=k("\u91CD\u7F6E"),Sl=k("\u6DFB\u52A0\u9009\u9879"),Ol=k("\u9884\u89C8"),Dl=k("\u5173\u95ED");function Ll(e,t,B,S,l,y){const C=_("el-option"),v=_("el-select"),h=_("el-input"),c=_("el-button"),p=_("el-checkbox"),E=_("el-checkbox-group"),V=_("el-input-number"),O=_("el-rate"),b=_("el-row"),g=_("Prompt"),$=_("Upload");return a(),f("div",el,[o("div",ol,[o("div",ll,[o("div",tl,[sl,o("div",nl,[u(v,{modelValue:e.stage,"onUpdate:modelValue":t[0]||(t[0]=s=>e.stage=s),class:"m-2",placeholder:"\u4E13\u4E1A\u9636\u6BB5",onChange:e.changeStage},{default:m(()=>[(a(!0),f(I,null,P(e.stageList,s=>(a(),F(C,{key:s.id,label:s.title,value:s.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",ul,[al,o("div",il,[u(h,{modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=s=>e.title=s),placeholder:"\u8BF7\u8F93\u5165\u9898\u5E72",clearable:"",style:{width:"60%"},onChange:e.setTitle},null,8,["modelValue","onChange"]),o("div",dl,[o("span",{class:"iconfont",style:{cursor:"pointer"},onClick:t[2]||(t[2]=(...s)=>e.uploadLoad&&e.uploadLoad(...s))},"\uE712")])])]),o("div",cl,[pl,o("div",rl,[o("ul",null,[(a(!0),f(I,null,P(e.options,(s,n)=>(a(),f("li",{key:n},[o("span",null,M(s.option)+" : ",1),u(h,{modelValue:s.title,"onUpdate:modelValue":U=>s.title=U,placeholder:"\u8BF7\u8F93\u5165\u9009\u9879\u5185\u5BB9",clearable:"",style:{width:"60%"},onChange:U=>e.setOption(s)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e.options.length-1===n?(a(),F(c,{key:0,class:"remove",style:{"margin-left":"10px"},onClick:U=>e.deleteOption(n)},{default:m(()=>[vl]),_:2},1032,["onClick"])):T("",!0)]))),128))])])]),o("div",_l,[hl,o("div",ml,[u(E,{modelValue:e.answer,"onUpdate:modelValue":t[3]||(t[3]=s=>e.answer=s),onChange:e.setAnswer},{default:m(()=>[(a(!0),f(I,null,P(e.options,(s,n)=>(a(),F(p,{label:s.option,key:n},null,8,["label"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",gl,[fl,o("div",$l,[u(V,{min:"0",modelValue:e.num,"onUpdate:modelValue":t[4]||(t[4]=s=>e.num=s),step:1,onChange:e.setValue},null,8,["modelValue","onChange"])])]),o("div",Cl,[wl,o("div",yl,[u(O,{modelValue:e.difficulty,"onUpdate:modelValue":t[5]||(t[5]=s=>e.difficulty=s),onChange:e.setDifficulty},null,8,["modelValue","onChange"])])]),o("div",bl,[kl,o("div",Bl,[u(h,{modelValue:e.point,"onUpdate:modelValue":t[6]||(t[6]=s=>e.point=s),placeholder:"\u77E5\u8BC6\u70B9",clearable:"",style:{width:"60%"},onChange:e.setPoint},null,8,["modelValue","onChange"])])]),o("div",El,[Vl,o("div",Al,[u(b,{class:"mb-4"},{default:m(()=>[u(c,{class:"submit",onClick:e.submit},{default:m(()=>[Ul]),_:1},8,["onClick"]),u(c,{class:"reset",onClick:e.resetValue},{default:m(()=>[Fl]),_:1},8,["onClick"]),u(c,{class:"add",onClick:e.addOptions},{default:m(()=>[Sl]),_:1},8,["onClick"]),u(c,{class:"showLook",onClick:e.Look},{default:m(()=>[Ol]),_:1},8,["onClick"]),u(c,{class:"close",onClick:e.back},{default:m(()=>[Dl]),_:1},8,["onClick"])]),_:1})])])])]),e.isShow?(a(),F(g,{key:0,prompt:e.prompt,onClose:e.close},null,8,["prompt","onClose"])):T("",!0),e.isUpload?(a(),F($,{key:1,onCloseUpload:e.closeUpload,onConfirm:e.confirm,imgUrl:e.imgUrl},null,8,["onCloseUpload","onConfirm","imgUrl"])):T("",!0)])}var jl=te(xo,[["render",Ll],["__scopeId","data-v-12609944"]]);const Tl=se({components:{Prompt:ce,Upload:_e},props:{showObj:Object},setup(e,t){const B=ie();de(()=>{B.dispatch("OptionsBank/getStage")});const S=J(()=>B.state.OptionsBank.stageList),l=J(()=>e.showObj),y=d(l.value&&l.value.stage?l.value.stage:""),C=w=>{console.log(w),y.value=w},v=d(l.value&&l.value.title?l.value.title:""),h=w=>{v.value=w},c=d(""),p=d(!1),E=()=>{p.value=!0,console.log(p.value)},V=w=>{p.value=!1,c.value=w},O=w=>{p.value=w},b=d(l.value&&l.value.answer?l.value.answer:""),g=w=>{b.value=w.target.value},$=d(l.value&&l.value.value?l.value.value:5),s=w=>{$.value=w},n=d(l.value&&l.value.difficulty?l.value.difficulty:null),U=w=>{n.value=w},j=d(l.value&&l.value.point?l.value.point:""),N=w=>{j.value=w},Q=async()=>{let w={id:l.value&&l.value.id?l.value.id:null,stage:y.value,title:v.value,student_answer:"",answer:b.value,img:c.value,value:$.value,type:2,difficulty:n.value,point:j.value,time:new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString()};await ve(w).then(q=>{t.emit("submit",!1),D()})},D=()=>{y.value="",v.value="",b.value="",$.value=5,n.value=null,j.value="",l.value=null},G=d({}),L=d(!1);return{stageList:S,stage:y,changeStage:C,title:v,setTitle:h,answer:b,setAnswer:g,num:$,setValue:s,difficulty:n,setDifficulty:U,point:j,setPoint:N,submit:Q,resetValue:D,Look:()=>{let w={stage:y.value,title:v.value,student_answer:"",answer:b.value,value:$.value,type:2,difficulty:n.value,point:j.value};G.value=w,L.value=!0},isShow:L,close:w=>{L.value=w},prompt:G,back:()=>{t.emit("submit",!1)},uploadLoad:E,isUpload:p,closeUpload:V,confirm:O,imgUrl:c}}}),oe=e=>(ne("data-v-348fe567"),e=e(),ue(),e),Il={class:"ShortAnswer"},Pl={class:"main"},zl={class:"Option"},Nl={class:"rows"},ql=oe(()=>o("h5",null,"\u4E13\u4E1A\u9636\u6BB5:",-1)),Ml={class:"select"},Rl={class:"rows"},Jl=oe(()=>o("h5",null,"\u9898\u5E72:",-1)),Ql={class:"select"},Gl={class:"upload"},Hl={class:"rows"},Kl=oe(()=>o("h5",null,"\u6807\u51C6\u7B54\u6848:",-1)),Wl={class:"select"},Xl={class:"rows"},Yl=oe(()=>o("h5",null,"\u5206\u503C:",-1)),Zl={class:"select"},xl={class:"rows"},et=oe(()=>o("h5",null,"\u96BE\u5EA6:",-1)),ot={class:"select radio"},lt={class:"rows"},tt=oe(()=>o("h5",null,"\u77E5\u8BC6\u70B9:",-1)),st={class:"select radio"},nt={class:"rows"},ut=oe(()=>o("h5",null,null,-1)),at={class:"select radio"},it=k("\u63D0\u4EA4"),dt=k("\u91CD\u7F6E"),ct=k("\u9884\u89C8"),pt=k("\u5173\u95ED");function rt(e,t,B,S,l,y){const C=_("el-option"),v=_("el-select"),h=_("el-input"),c=_("el-input-number"),p=_("el-rate"),E=_("el-button"),V=_("el-row"),O=_("Prompt"),b=_("Upload");return a(),f("div",Il,[o("div",Pl,[o("div",zl,[o("div",Nl,[ql,o("div",Ml,[u(v,{modelValue:e.stage,"onUpdate:modelValue":t[0]||(t[0]=g=>e.stage=g),class:"m-2",placeholder:"\u4E13\u4E1A\u9636\u6BB5",onChange:e.changeStage},{default:m(()=>[(a(!0),f(I,null,P(e.stageList,g=>(a(),F(C,{key:g.id,label:g.title,value:g.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",Rl,[Jl,o("div",Ql,[u(h,{modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=g=>e.title=g),placeholder:"\u8BF7\u8F93\u5165\u9898\u5E72",clearable:"",style:{width:"60%"},onChange:e.setTitle},null,8,["modelValue","onChange"]),o("div",Gl,[o("span",{class:"iconfont",style:{cursor:"pointer"},onClick:t[2]||(t[2]=(...g)=>e.uploadLoad&&e.uploadLoad(...g))},"\uE712")])])]),o("div",Hl,[Kl,o("div",Wl,[me(o("textarea",{name:"answer",cols:"100",rows:"15","onUpdate:modelValue":t[3]||(t[3]=g=>e.answer=g),onChange:t[4]||(t[4]=(...g)=>e.setAnswer&&e.setAnswer(...g)),placeholder:"\u8BF7\u8F93\u5165\u6807\u51C6\u7B54\u6848"},`\r
            `,544),[[ke,e.answer]])])]),o("div",Xl,[Yl,o("div",Zl,[u(c,{min:"0",modelValue:e.num,"onUpdate:modelValue":t[5]||(t[5]=g=>e.num=g),step:1,onChange:e.setValue},null,8,["modelValue","onChange"])])]),o("div",xl,[et,o("div",ot,[u(p,{modelValue:e.difficulty,"onUpdate:modelValue":t[6]||(t[6]=g=>e.difficulty=g),onChange:e.setDifficulty},null,8,["modelValue","onChange"])])]),o("div",lt,[tt,o("div",st,[u(h,{modelValue:e.point,"onUpdate:modelValue":t[7]||(t[7]=g=>e.point=g),placeholder:"\u77E5\u8BC6\u70B9",clearable:"",style:{width:"60%"},onChange:e.setPoint},null,8,["modelValue","onChange"])])]),o("div",nt,[ut,o("div",at,[u(V,{class:"mb-4"},{default:m(()=>[u(E,{class:"submit",onClick:e.submit},{default:m(()=>[it]),_:1},8,["onClick"]),u(E,{class:"reset",onClick:e.resetValue},{default:m(()=>[dt]),_:1},8,["onClick"]),u(E,{class:"showLook",onClick:e.Look},{default:m(()=>[ct]),_:1},8,["onClick"]),u(E,{class:"close",onClick:e.back},{default:m(()=>[pt]),_:1},8,["onClick"])]),_:1})])])])]),e.isShow?(a(),F(O,{key:0,prompt:e.prompt,onClose:e.close},null,8,["prompt","onClose"])):T("",!0),e.isUpload?(a(),F(b,{key:1,onCloseUpload:e.closeUpload,onConfirm:e.confirm,imgUrl:e.imgUrl},null,8,["onCloseUpload","onConfirm","imgUrl"])):T("",!0)])}var vt=te(Tl,[["render",rt],["__scopeId","data-v-348fe567"]]);const _t=se({components:{Prompt:ce,Radio:Zo,Checkbox:jl,ShortAnswer:vt},setup(){const e=ie(),t=d(!0);let B=d(0),S=d(1),l=d(10);const y=d(!1),C=d(!0),v=r=>{l.value=r,V()},h=r=>{S.value=r,V()};let c=d([]),p=d([]),E=d([]);e.dispatch("OptionsBank/getQuestion");const V=()=>{c.value=J(()=>e.state.OptionsBank.question),B.value=c.value.value.length;for(let r=0;r<c.value.value.length;r++)Number(c.value.value[r].type)===0?c.value.value[r].type="\u5355\u9009\u9898":Number(c.value.value[r].type)===1?c.value.value[r].type="\u591A\u9009\u9898":Number(c.value.value[r].type)===2&&(c.value.value[r].type="\u7B80\u7B54\u9898");E.value=c.value.value,p.value=c.value.value.slice((S.value-1)*l.value,(S.value-1)*l.value+l.value),setTimeout(()=>{t.value=!1},1e3)};setTimeout(()=>{V()},100),de(()=>{e.dispatch("OptionsBank/getStage")});const O=J(()=>e.state.OptionsBank.stageList),b=d(""),g=r=>{b.value=r},$=d([0,1,2]),s=d(null),n=r=>{s.value=r},U=()=>{const r={stage:b.value,type:s.value};console.log(r,272),ye(r).then(A=>{const{data:W}=A.data;console.log(A.data,276),j(W)}),console.log("\u641C\u7D22")},j=r=>{B.value=r.length;for(let A=0;A<r.length;A++)Number(r[A].type)===0?r[A].type="\u5355\u9009\u9898":Number(r[A].type)===1?r[A].type="\u591A\u9009\u9898":Number(r[A].type)===2&&(r[A].type="\u7B80\u7B54\u9898");p.value=r},N=()=>{b.value="",s.value=null,ee.value=null,V()},Q=d({}),D=d(!1),G=(r,A)=>{Q.value=A,D.value=!0},L=r=>{D.value=r};let H=d({});const z=(r,A)=>{let{type:W}=A;W==="\u5355\u9009\u9898"?q.value=0:W==="\u591A\u9009\u9898"?q.value=1:W==="\u7B80\u5355\u9898"&&(q.value=2),H.value=A,K.value=!0},le=(r,A)=>{const{id:W}=A;Ee.confirm("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u9053\u9898\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{e.commit("OptionsBank/DeleteQuestion",W),be({id:W}).then(()=>{re({message:"\u5DF2\u7ECF\u6210\u529F\u5220\u9664\u8FD9\u9053\u9898\u3002",type:"success"}),V()})}).catch(()=>{re({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},w=d([0,1,2]),q=d(null);let K=d(!1);const x=r=>{q.value=r},R=()=>{q.value!==null&&(H.value={},K.value=!0)},pe=d([0,1]),ee=d(null);return{optionList:p,stageList:O,stage:b,changeStage:g,typeList:$,type:s,setType:n,search:U,exportExcel:()=>{const r=new $e;ee.value===0?r.exportAsExcelFile(p.value,"\u9898\u5E93"):ee.value===1&&r.exportAsExcelFile(E.value,"\u9898\u5E93")},handleEdit:z,handleDelete:le,handleShow:G,isShow:D,close:L,prompt:Q,reset:N,addTypeList:w,addType:q,setAdd:R,isAdd:K,showObj:H,submit:r=>{K.value=r,setTimeout(()=>{e.dispatch("OptionsBank/getQuestion")},100),setTimeout(()=>{V()},500)},currentPage:S,pageSize:l,small:y,background:C,handleSizeChange:v,handleCurrentChange:h,total:B,setAddType:x,ExcelType:ee,ExcelList:pe,setExcel:r=>{ee.value=r}}}}),fe=e=>(ne("data-v-3f79f169"),e=e(),ue(),e),ht={class:"List"},mt={class:"search"},gt={class:"left"},ft={class:"rows"},$t=fe(()=>o("h4",null,"\u4E13\u4E1A\u9636\u6BB5 :",-1)),Ct={style:{"margin-left":"15px"}},wt={class:"rows",style:{"margin-left":"15px"}},yt=fe(()=>o("h4",null,"\u9898\u578B :",-1)),bt={style:{"margin-left":"15px"}},kt={class:"rows",style:{"margin-left":"15px"}},Bt=k("\u641C\u7D22"),Et=k("\u91CD\u7F6E"),Vt={class:"right"},At={class:"rows"},Ut={style:{"margin-right":"15px"}},Ft=k("\u6DFB\u52A0"),St={class:"rows"},Ot={style:{"margin-right":"15px"}},Dt=k("\u5BFC\u51FA"),Lt={class:"tableBox"},jt={class:"table"},Tt=k("\u9884\u89C8"),It=k("\u7F16\u8F91"),Pt=k("\u5220\u9664"),zt={class:"pagination"},Nt={class:"contain"};function qt(e,t,B,S,l,y){const C=_("el-option"),v=_("el-select"),h=_("el-button"),c=_("el-row"),p=_("el-table-column"),E=_("el-table"),V=_("el-pagination"),O=_("Prompt"),b=_("Radio"),g=_("Checkbox"),$=_("ShortAnswer"),s=Be("loading");return a(),f("div",ht,[o("div",mt,[o("div",gt,[o("div",ft,[$t,o("p",Ct,[u(v,{modelValue:e.stage,"onUpdate:modelValue":t[0]||(t[0]=n=>e.stage=n),class:"m-2",placeholder:"\u4E13\u4E1A\u9636\u6BB5",onChange:e.changeStage},{default:m(()=>[(a(!0),f(I,null,P(e.stageList,n=>(a(),F(C,{key:n.id,label:n.title,value:n.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",wt,[yt,o("p",bt,[u(v,{modelValue:e.type,"onUpdate:modelValue":t[1]||(t[1]=n=>e.type=n),class:"m-2",placeholder:"\u9898\u578B",onChange:e.setType},{default:m(()=>[(a(!0),f(I,null,P(e.typeList,n=>(a(),F(C,{key:n===0?"\u5355\u9009\u9898":n===1?"\u591A\u9009\u9898":"\u7B80\u7B54\u9898",label:n===0?"\u5355\u9009\u9898":n===1?"\u591A\u9009\u9898":"\u7B80\u7B54\u9898",value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",kt,[u(c,{class:"mb-4"},{default:m(()=>[u(h,{type:"primary",onClick:e.search},{default:m(()=>[Bt]),_:1},8,["onClick"]),u(h,{class:"reset",onClick:e.reset},{default:m(()=>[Et]),_:1},8,["onClick"])]),_:1})])]),o("div",Vt,[o("div",At,[o("p",null,[u(v,{modelValue:e.addType,"onUpdate:modelValue":t[2]||(t[2]=n=>e.addType=n),class:"m-2",placeholder:"\u9898\u578B",onChange:e.setAddType},{default:m(()=>[(a(!0),f(I,null,P(e.addTypeList,n=>(a(),F(C,{key:n===0?"\u5355\u9009\u9898":n===1?"\u591A\u9009\u9898":"\u7B80\u7B54\u9898",label:n===0?"\u5355\u9009\u9898":n===1?"\u591A\u9009\u9898":"\u7B80\u7B54\u9898",value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),o("p",Ut,[u(h,{type:"primary",onClick:e.setAdd,style:{"margin-left":"15px"}},{default:m(()=>[Ft]),_:1},8,["onClick"])])]),o("div",St,[o("p",Ot,[u(v,{modelValue:e.ExcelType,"onUpdate:modelValue":t[3]||(t[3]=n=>e.ExcelType=n),class:"m-2",placeholder:"\u5BFC\u51FA\u7C7B\u578B",onChange:e.setExcel},{default:m(()=>[(a(!0),f(I,null,P(e.ExcelList,n=>(a(),F(C,{key:n===0?"\u5BFC\u51FA\u5F53\u524D\u9875":"\u5BFC\u51FA\u6240\u6709",label:n===0?"\u5BFC\u51FA\u5F53\u524D\u9875":"\u5BFC\u51FA\u6240\u6709",value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),o("p",null,[u(h,{type:"info",onClick:e.exportExcel},{default:m(()=>[Dt]),_:1},8,["onClick"])])])])]),o("div",Lt,[o("div",jt,[me((a(),F(E,{id:"table",data:e.optionList,border:"",style:{width:"100%"},height:"465"},{default:m(()=>[u(p,{prop:"id",label:"\u9898\u76EEID",width:"75"}),u(p,{prop:"stage",label:"\u4E13\u4E1A\u9636\u6BB5",width:"140"}),u(p,{prop:"type",label:"\u9898\u578B",width:"100"}),u(p,{prop:"title",label:"\u9898\u5E72",width:"600"}),u(p,{prop:"value",label:"\u5206\u6570",width:"60"}),u(p,{prop:"difficulty",label:"\u96BE\u5EA6",width:"60"}),u(p,{prop:"date",label:"\u521B\u5EFA\u65F6\u95F4",width:"200"}),u(p,{label:"\u64CD\u4F5C"},{default:m(n=>[u(h,{size:"small",onClick:U=>e.handleShow(n.$index,n.row),class:"showLook"},{default:m(()=>[Tt]),_:2},1032,["onClick"]),u(h,{size:"small",onClick:U=>e.handleEdit(n.$index,n.row),class:"edit"},{default:m(()=>[It]),_:2},1032,["onClick"]),u(h,{size:"small",class:"delete",type:"danger",onClick:U=>e.handleDelete(n.$index,n.row)},{default:m(()=>[Pt]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[s,e.loading]])]),o("div",zt,[o("div",Nt,[u(V,{modelValue:e.pageSize,"onUpdate:modelValue":t[4]||(t[4]=n=>e.pageSize=n),currentPage:e.currentPage,"page-sizes":[10,15,20,25],small:e.small,background:e.background,layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["modelValue","currentPage","small","background","total","onSizeChange","onCurrentChange"])])])]),e.isShow?(a(),F(O,{key:0,prompt:e.prompt,onClose:e.close},null,8,["prompt","onClose"])):T("",!0),e.isAdd&&e.addType===0?(a(),F(b,{key:1,showObj:e.showObj,onSubmit:e.submit},null,8,["showObj","onSubmit"])):T("",!0),e.isAdd&&e.addType===1?(a(),F(g,{key:2,showObj:e.showObj,onSubmit:e.submit},null,8,["showObj","onSubmit"])):T("",!0),e.isAdd&&e.addType===2?(a(),F($,{key:3,showObj:e.showObj,onSubmit:e.submit},null,8,["showObj","onSubmit"])):T("",!0)])}var Qt=te(_t,[["render",qt],["__scopeId","data-v-3f79f169"]]);export{Qt as default};
